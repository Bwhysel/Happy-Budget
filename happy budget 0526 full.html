<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Budget¬Æ for Your Best Life</title>
  <style>
    body { font-family: 'Roboto', Arial, sans-serif; padding: 1em; max-width: 700px; margin: auto; line-height: 1.5; }
    .step { display: none; }
    .step.active { display: block; }
    .chip { display: inline-block; padding: 6px 12px; margin: 4px; border: 1px solid #aaa; border-radius: 16px; cursor: pointer; }
    .chip.active { background-color: #e0f7fa; font-weight: bold; }
    .expense-row { margin-bottom: 1em; display: flex; flex-wrap: wrap; gap: 1em; align-items: center; }
    .expense-row label { min-width: 160px; flex: 1; }
    .expense-row select, .expense-row input { flex: 2; min-width: 120px; padding: 0.3em; }
    .expense-row input.untouched, .expense-row select.untouched { background-color: #fff9c4; }
    .expense-row input.filled, .expense-row select.filled { background-color: #c8e6c9; }
    /* take-home pay input coloring */
    #takeHomePayInput.untouched { background-color: #fff9c4; }
    #takeHomePayInput.filled { background-color: #c8e6c9; }
    button { background-color: #2196f3; color: white; border: none; padding: 0.6em 1.2em; margin-top: 1em; font-size: 1em; border-radius: 5px; cursor: pointer; }
    #continueButtonSavings:disabled { background-color: #90caf9; cursor: not-allowed; }
    #continueTo2_5:disabled { background-color: #90caf9; cursor: not-allowed; }
    progress.negative::-webkit-progress-bar { background-color: #f44336; }
    .overspent-label { color: #e91e63; }
  </style>
</head>
<body>
  <h1>Create Your Happy Budget<sup>¬Æ</sup> üòÅ</h1>
  <p>A Happy Budget is a compassionate and sustainable plan for spending and saving that respects your humanity and promotes happiness.</p>
  <p>üîê Your budget stays private! Nothing is saved or sent unless you choose to share it.</p>

  <div id="step1" class="step active">
    <h2>1. Set Your Savings Goals</h2>
    <p>üí° Tap one or more savings goals that are important to you. These can help guide your spending and motivate you to save.</p>
    <div id="savingsGoalsList"></div>
    <button id="continueButtonSavings" disabled>Continue üëç</button>
  </div>

  <div id="step2" class="step">
    <h2>2. Enter Your Income, Values, and Allocations</h2>
    <div class="expense-row">
      <label for="takeHomePayInput">Enter your monthly take-home pay (after taxes):</label>
      <input type="number" id="takeHomePayInput" class="untouched" placeholder="e.g. 8000" min="0" step="10">
    </div>
    <div id="expenseGrid"></div>
    <div id="progressBars" style="display:none; flex-direction:column; gap:1em; margin-top:2em;">
      <div style="display:flex; gap:2em; align-items:center;">
        <div style="flex:1;">
          <label>Budget Progress</label>
          <span id="remainingLabel"></span>
          <progress id="budgetProgress" value="0" max="100" style="width:100%;"></progress>
        </div>
        <div style="flex:1;">
          <label>Categories Completed (<span id="categoryLabel">0</span>/11)</label>
          <progress id="categoryProgress" value="0" max="11" style="width:100%;"></progress>
        </div>
      </div>
      <div style="text-align:center; display:flex; justify-content:center; gap:1em;">
        <button id="backTo1">‚Üê Back</button>
        <button id="continueTo2_5" disabled>Continue üëç</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const savingsGoals = ['üö® Emergency Fund','üí≥ Debt Reduction','üè† Down Payment','üìö Education','üë©‚Äçüíº New Business','üîß Repairs','üëµ Comfortable Old Age','‚ú® Other'];
      const categories = [
        { name: 'Rent or Mortgage', emoji: 'üè†', defaultPct: 0.3 },
        { name: 'Utilities', emoji: 'üí°', defaultPct: 0.05 },
        { name: 'Groceries', emoji: 'üõí', defaultPct: 0.1 },
        { name: 'Transportation', emoji: 'üöå', defaultPct: 0.05 },
        { name: 'Health & Insurance', emoji: '‚ù§Ô∏è', defaultPct: 0.07 },
        { name: 'Childcare', emoji: 'üë∂', defaultPct: 0.07 },
        { name: 'Education', emoji: 'üìö', defaultPct: 0.05 },
        { name: 'Giving', emoji: 'üéÅ', defaultPct: 0.03 },
        { name: 'Entertainment', emoji: 'üéâ', defaultPct: 0.05 },
        { name: 'Clothing', emoji: 'üëï', defaultPct: 0.03 },
        { name: 'Other', emoji: '‚ú®', defaultPct: null }
      ];
      let currentRow = 0;
      const budgetApp = {
        selectedGoals: [], takeHomePay: 0, otherInput: null,
        expenseState: { allocations: {},
          getTotal() { return Object.values(this.allocations).reduce((sum,val)=>sum+(parseFloat(val)||0),0); }
        },
        goToStep(n) { document.querySelectorAll('.step').forEach(s=>s.classList.remove('active')); document.getElementById(`step${n}`).classList.add('active'); }
      };

      function updateProgress() {
        const continueBtn = document.getElementById('continueTo2_5');
        const totalAlloc = budgetApp.expenseState.getTotal();
        const remaining = budgetApp.takeHomePay - totalAlloc;
        if (budgetApp.otherInput) {
          budgetApp.otherInput.placeholder = `e.g. ${Math.max(0,Math.round(remaining))}`;
        }
        const bp = document.getElementById('budgetProgress');
        if (remaining<0) {
          bp.classList.add('negative');
          document.getElementById('remainingLabel').innerHTML = `<span class="overspent-label">‚ö†Ô∏è ($${Math.abs(Math.round(remaining)).toLocaleString()} overspent)</span>`;
        } else {
          bp.classList.remove('negative');
          document.getElementById('remainingLabel').textContent = `$${Math.max(0,Math.round(remaining)).toLocaleString()} remaining`;
        }
        bp.value = Math.min(100,Math.round((totalAlloc/budgetApp.takeHomePay)*100));
        const rows = document.querySelectorAll('#expenseGrid .expense-row');
        let completed = 0;
        rows.forEach(row=>{
          const sel=row.querySelector('select'); const inp=row.querySelector('input');
          if(sel&&inp&&sel.value!==''&&inp.value.trim()!=='') completed++;
        });
        document.getElementById('categoryProgress').value = completed;
        document.getElementById('categoryLabel').textContent = completed;
        continueBtn.disabled = !(remaining===0 && completed===categories.length);
      }

      function renderSavingsGoals(){ const ctr=document.getElementById('savingsGoalsList'); ctr.innerHTML=''; savingsGoals.forEach(goal=>{ const chip=document.createElement('div'); chip.className='chip'; chip.textContent=goal; chip.onclick=()=>{ chip.classList.toggle('active'); const sel=[...document.querySelectorAll('#savingsGoalsList .chip.active')].map(el=>el.textContent); budgetApp.selectedGoals=sel; document.getElementById('continueButtonSavings').disabled=sel.length===0; }; ctr.appendChild(chip);} ); }
      function renderRow(idx){ const {name,emoji,defaultPct}=categories[idx]; const container=document.getElementById('expenseGrid'); if(idx===0) container.innerHTML=''; const row=document.createElement('div'); row.className='expense-row'; const label=document.createElement('label'); label.textContent=`${emoji} ${name}`; const select=document.createElement('select'); select.innerHTML='<option value="">Pick a value...</option>'; ['Autonomy','Basic Needs','Empowerment','Financial Security','Fun & Leisure','Giving & Helping Others','Health','Learning','None','Respect','Social Connectedness'].forEach(val=>{ const opt=document.createElement('option'); opt.value=val; opt.textContent=val; select.appendChild(opt);} ); select.classList.add('untouched'); select.addEventListener('change',()=>{ updateProgress(); if(select.value){select.classList.add('filled');select.classList.remove('untouched');}else{select.classList.remove('filled');select.classList.add('untouched');}tryNext();}); const input=document.createElement('input'); input.type='number'; input.min='0'; input.step='10'; input.classList.add('untouched'); if(name==='Other') budgetApp.otherInput=input; input.placeholder=`e.g. ${name==='Other'?0:Math.round(budgetApp.takeHomePay*defaultPct)}`; input.addEventListener('focus',()=>input.classList.remove('untouched'));
          input.addEventListener('input',()=>updateProgress());
          input.addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();input.blur();}}); input.addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();input.blur();}}); function tryNext(){ if(select.value!==''&&input.value.trim()!==''){ budgetApp.expenseState.allocations[name]=parseFloat(input.value)||0; input.classList.add('filled'); select.classList.add('filled'); updateProgress(); if(currentRow<categories.length-1){currentRow++;renderRow(currentRow);} }} input.addEventListener('blur',tryNext); row.append(label,select,input); container.appendChild(row);} document.getElementById('continueButtonSavings').addEventListener('click',()=>{budgetApp.goToStep(2);} ); const thp=document.getElementById('takeHomePayInput'); thp.classList.add('untouched'); thp.addEventListener('focus',()=>thp.classList.remove('untouched')); thp.addEventListener('blur',function(){ const pay=parseFloat(this.value); if(!isNaN(pay)&&pay>=0){budgetApp.takeHomePay=pay;currentRow=0;document.getElementById('progressBars').style.display='flex'; renderRow(currentRow);} if(this.value.trim()!==''){thp.classList.add('filled');} }); thp.addEventListener('keydown',function(e){if(e.key==='Enter')this.blur();}); document.getElementById('backTo1').addEventListener('click',()=>budgetApp.goToStep(1)); renderSavingsGoals(); });
  </script>
</body>
</html>
